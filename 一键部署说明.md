# 🚀 一键部署到互联网 - 最简单方法

## ⭐ 推荐：Railway（5分钟上线）

### 第一步：访问 Railway
👉 https://railway.app/

### 第二步：登录
- 点击 "Start a New Project"
- 选择 "Login with GitHub"
- 使用你的 GitHub 账号登录（darzui88）

### 第三步：导入项目
1. 选择 "Deploy from GitHub repo"
2. 授权 Railway 访问 GitHub
3. 选择 `shanghai_tour` 仓库
4. Railway 会自动开始部署

### 第四步：添加数据库
1. 在 Railway 项目中点击 "New"
2. 选择 "Database" → "Add MySQL"
3. Railway 会自动创建数据库
4. 复制数据库连接信息

### 第五步：配置环境变量
在项目设置中找到 "Variables"，添加：

```
NODE_ENV=production
PORT=5000
DB_HOST=你的数据库主机（Railway会自动提供）
DB_PORT=3306
DB_NAME=railway
DB_USER=root
DB_PASSWORD=你的数据库密码（Railway会自动提供）
JWT_SECRET=任意随机字符串（例如：my-secret-key-123456）
```

### 第六步：完成！
Railway 会自动部署，几分钟后会给你一个 URL：
```
https://你的项目名.up.railway.app
```

**完成！** 你的应用已经上线，全世界都可以访问了！🎉

---

## 📝 部署后需要做的事

### 1. 初始化数据库
首次部署后，数据库表是空的。你有两个选择：

**选项 A：自动初始化（推荐）**
- 服务器启动时会自动创建表
- 访问 `/api/health` 检查是否成功

**选项 B：手动运行种子数据**
- 如果需要示例数据，可以在 Railway 的 Console 中运行：
```bash
npm run seed
```

### 2. 创建管理员账号
如果需要访问管理后台，运行：
```bash
npm run seed  # 这会创建默认管理员账号
```
默认管理员信息会在 seed 脚本中定义。

---

## 🔄 更新代码

以后更新代码很简单：
1. 在本地修改代码
2. 提交到 GitHub：
   ```bash
   git add .
   git commit -m "更新说明"
   git push
   ```
3. Railway 会自动重新部署！

---

## 🎯 其他部署选项

### 选项 2：Render（免费）
👉 https://render.com/
- 注册并连接 GitHub
- 创建 Web Service
- 选择你的仓库
- 自动部署

### 选项 3：Vercel（前端）+ Railway（后端）
- 前端部署到 Vercel：https://vercel.com/
- 后端部署到 Railway（按上面的步骤）

---

## 💰 成本

- **Railway**：$5/月起（有免费试用额度）
- **Render**：免费版可用（有限制）
- **Vercel**：免费（前端）

---

## 🆘 遇到问题？

### 数据库连接失败
- 检查环境变量中的数据库信息
- 确保数据库服务已启动

### 前端无法访问
- 确保 `NODE_ENV=production` 已设置
- 检查前端构建是否成功

### API 无法访问
- 检查 `/api/health` 端点
- 查看 Railway 日志

---

## ✅ 部署检查清单

- [ ] 代码已提交到 GitHub
- [ ] Railway 项目已创建
- [ ] 数据库已添加
- [ ] 环境变量已配置
- [ ] 部署成功
- [ ] 可以访问网站 URL
- [ ] API 正常工作（访问 `/api/health`）

---

## 🎉 完成！

部署完成后，你的应用就可以在互联网上访问了！

**仓库地址**：https://github.com/darzui88/shanghai_tour
**Railway**：https://railway.app/

有任何问题随时问我！
